<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Guide du Détour</title>
  <meta name="description" content="Transformez chaque trajet en voyage. Choisissez un détour de 0 à 20 km : Guide du Détour vous montre ce qui vaut le détour sur votre route." />

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --glass-bg: rgba(255,255,255,.06);
      --glass-brd: rgba(255,255,255,.14);
      --glass-brd-2: rgba(255,255,255,.08);
      --txt: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --muted2: rgba(255,255,255,.45);
      --shadow: 0 20px 60px rgba(0,0,0,.45);
    }

    html, body { height: 100%; }
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, "SF Pro Display", "SF Pro Text", Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: #070A12;
      color: var(--txt);
    }

    /* App-like background */
    .bg-app{
      position: relative;
      overflow-x: hidden;
    }
    .bg-app::before{
      content:"";
      position: fixed;
      inset: -20vh -20vw;
      background:
        radial-gradient(1200px 800px at 20% 20%, rgba(70,130,255,.22), transparent 55%),
        radial-gradient(900px 700px at 80% 30%, rgba(160,80,255,.18), transparent 60%),
        radial-gradient(800px 700px at 60% 85%, rgba(60,220,190,.14), transparent 55%),
        radial-gradient(900px 700px at 10% 90%, rgba(255,180,60,.08), transparent 60%);
      filter: blur(0px);
      pointer-events: none;
      z-index: -2;
    }
    .bg-app::after{
      content:"";
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.65)),
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.28'/%3E%3C/svg%3E");
      background-size: auto, 280px 280px;
      mix-blend-mode: overlay;
      pointer-events: none;
      z-index: -1;
      opacity: .18;
    }

    .glass{
      background: var(--glass-bg);
      border: 1px solid var(--glass-brd);
      box-shadow: var(--shadow);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }
    .glass-soft{
      background: rgba(255,255,255,.04);
      border: 1px solid var(--glass-brd-2);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
    }

    .hairline{
      border-top: 1px solid rgba(255,255,255,.08);
    }

    .btn-primary{
      background: rgba(255,255,255,.92);
      color: #0B1020;
    }
    .btn-primary:hover{
      background: rgba(255,255,255,.82);
    }
    .btn-ghost{
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.92);
    }
    .btn-ghost:hover{
      background: rgba(255,255,255,.10);
    }

    /* Phone */
    .phone-shell{
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 30px 120px rgba(0,0,0,.6);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
    }
  </style>
</head>

<body class="bg-app">

  <!-- Top bar (app-like) -->
  <header class="sticky top-0 z-50 px-4 sm:px-6 pt-4">
    <div class="max-w-6xl mx-auto glass rounded-3xl px-4 sm:px-5 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <!-- Placeholder logo bubble -->
        <div class="w-9 h-9 rounded-2xl glass-soft flex items-center justify-center">
          <span class="text-sm font-semibold text-white/90">GD</span>
        </div>
        <div>
          <div class="text-sm font-semibold text-white/90 leading-none">Guide du Détour</div>
          <div class="text-[11px] text-white/55 leading-none mt-1">0–20 km • ce qui vaut le détour</div>
        </div>
      </div>

      <div class="flex items-center gap-2">
        <a href="#how" class="hidden sm:inline-flex px-4 py-2 rounded-2xl btn-ghost text-sm transition">
          Comment ça marche
        </a>
        <a href="#waitlist" class="inline-flex px-4 py-2 rounded-2xl btn-primary text-sm font-semibold transition">
          Être informé
        </a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="px-4 sm:px-6 pt-10 sm:pt-14 pb-10">
    <div class="max-w-6xl mx-auto grid lg:grid-cols-2 gap-8 lg:gap-12 items-center">
      <!-- Left -->
      <div class="glass rounded-[32px] p-6 sm:p-10">
        <h1 class="text-4xl sm:text-5xl md:text-6xl font-semibold tracking-tight leading-[1.02]">
          Transformez chaque trajet
          <span class="block mt-2 text-white/95">en voyage.</span>
        </h1>

        <p class="mt-6 text-base sm:text-lg text-white/70 max-w-2xl">
          Guide du Détour révèle ce qui vaut le détour sur votre route —
          si vous êtes prêt à vous écarter de <span class="text-white/90 font-semibold">0 à 20 km</span>.
        </p>

        <div class="mt-6 grid sm:grid-cols-2 gap-3">
          <div class="glass-soft rounded-3xl p-4">
            <div class="text-sm font-semibold text-white/90">Simple</div>
            <div class="text-sm text-white/60 mt-1">De A à B, puis découvrez autour de votre itinéraire.</div>
          </div>
          <div class="glass-soft rounded-3xl p-4">
            <div class="text-sm font-semibold text-white/90">Vous gardez le contrôle</div>
            <div class="text-sm text-white/60 mt-1">Le détour est en kilomètres, pas en “minutes” floues.</div>
          </div>
        </div>

        <div class="mt-8 flex flex-col sm:flex-row gap-3">
          <a href="#waitlist" class="inline-flex items-center justify-center px-6 py-4 rounded-3xl btn-primary text-base font-semibold transition">
            Être informé du lancement
          </a>
          <a href="#how" class="inline-flex items-center justify-center px-6 py-4 rounded-3xl btn-ghost text-base transition">
            Voir comment ça marche
          </a>
        </div>

        <p class="mt-5 text-sm text-white/55">
          Pas de spam. Juste le lancement et les mises à jour importantes.
        </p>
      </div>

      <!-- Right (phone + captions) -->
      <div class="glass rounded-[32px] p-6 sm:p-10">
        <div class="flex items-start justify-between gap-4">
          <div>
            <div class="text-sm font-semibold text-white/90">Aperçu de l’app</div>
            <div class="text-sm text-white/55 mt-1">Une expérience “app”, pas une page web.</div>
          </div>
          <div class="hidden sm:flex items-center gap-2 text-xs text-white/55">
            <span class="inline-block w-2 h-2 rounded-full bg-white/40"></span>
            <span>Captures: screen1…screen5</span>
          </div>
        </div>

        <div class="mt-6 flex justify-center">
          <div class="relative w-[280px] sm:w-[330px] md:w-[360px] aspect-[9/19] rounded-[44px] phone-shell p-[10px]">
            <div class="relative w-full h-full rounded-[36px] bg-black/90 overflow-hidden">
              <div class="absolute top-3 left-1/2 -translate-x-1/2 w-32 h-6 rounded-full bg-black/70 ring-1 ring-white/10 z-20"></div>

              <img
                id="appSlider"
                src="./screen1.png"
                alt="Aperçu de l’application"
                class="w-full h-full object-cover opacity-100 transition-opacity duration-700"
              />

              <div id="sliderFallback" class="hidden w-full h-full items-center justify-center p-8 text-center">
                <div class="text-white/80">
                  <div class="text-xl font-semibold">Ajoutez vos captures</div>
                  <div class="mt-2 text-sm text-white/60">
                    Placez <span class="font-mono">screen1.png</span> … <span class="font-mono">screen5.png</span><br/>
                    à côté de <span class="font-mono">index.html</span>
                  </div>
                </div>
              </div>

              <div class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-white/10 z-10"></div>

              <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-20">
                <span class="dot w-2 h-2 rounded-full bg-white/35"></span>
                <span class="dot w-2 h-2 rounded-full bg-white/35"></span>
                <span class="dot w-2 h-2 rounded-full bg-white/35"></span>
                <span class="dot w-2 h-2 rounded-full bg-white/35"></span>
                <span class="dot w-2 h-2 rounded-full bg-white/35"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="mt-5 text-center">
          <div class="text-sm text-white/60">Écran actuel :</div>
          <div class="text-base font-semibold text-white/90 mt-1" id="slideCaption">Votre itinéraire</div>
        </div>

        <div class="mt-6 hairline pt-6 grid sm:grid-cols-3 gap-3">
          <div class="glass-soft rounded-3xl p-4">
            <div class="text-sm font-semibold text-white/90">Découvrir</div>
            <div class="text-sm text-white/60 mt-1">Des points qui valent l’arrêt.</div>
          </div>
          <div class="glass-soft rounded-3xl p-4">
            <div class="text-sm font-semibold text-white/90">Apprendre</div>
            <div class="text-sm text-white/60 mt-1">Une route qui devient culture.</div>
          </div>
          <div class="glass-soft rounded-3xl p-4">
            <div class="text-sm font-semibold text-white/90">Contribuer</div>
            <div class="text-sm text-white/60 mt-1">Photos, infos, corrections.</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- WHY (app-like panel) -->
  <section class="px-4 sm:px-6 py-10">
    <div class="max-w-6xl mx-auto glass rounded-[32px] p-6 sm:p-10">
      <h2 class="text-2xl sm:text-3xl font-semibold text-white/95">
        Les GPS vont vite. Mais ils passent à côté de l’essentiel.
      </h2>
      <p class="mt-4 text-white/65 text-base sm:text-lg max-w-4xl">
        Villages, églises, points de vue, patrimoine, fermes, lieux insolites…
        Souvent, c’est à quelques kilomètres de la route. Vous arrivez à destination — mais vous n’avez rien vu.
      </p>

      <div class="mt-7 grid sm:grid-cols-3 gap-3">
        <div class="glass-soft rounded-3xl p-5">
          <div class="text-sm font-semibold text-white/90">0–20 km</div>
          <div class="mt-1 text-sm text-white/60">Une règle claire, pas une promesse floue.</div>
        </div>
        <div class="glass-soft rounded-3xl p-5">
          <div class="text-sm font-semibold text-white/90">Moins d’ennui</div>
          <div class="mt-1 text-sm text-white/60">Plus de “waouh” entre A et B.</div>
        </div>
        <div class="glass-soft rounded-3xl p-5">
          <div class="text-sm font-semibold text-white/90">Carte vivante</div>
          <div class="mt-1 text-sm text-white/60">La communauté enrichit les lieux.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- HOW -->
  <section id="how" class="px-4 sm:px-6 py-10">
    <div class="max-w-6xl mx-auto grid lg:grid-cols-3 gap-3">
      <div class="glass rounded-[28px] p-6 sm:p-8">
        <div class="text-sm text-white/55">Étape 1</div>
        <div class="mt-1 text-xl font-semibold text-white/95">Entrez votre itinéraire</div>
        <div class="mt-3 text-white/60">De A à B, comme d’habitude.</div>
      </div>
      <div class="glass rounded-[28px] p-6 sm:p-8">
        <div class="text-sm text-white/55">Étape 2</div>
        <div class="mt-1 text-xl font-semibold text-white/95">Choisissez votre détour</div>
        <div class="mt-3 text-white/60">De 0 à 20 km. Vous gardez le contrôle.</div>
      </div>
      <div class="glass rounded-[28px] p-6 sm:p-8">
        <div class="text-sm text-white/55">Étape 3</div>
        <div class="mt-1 text-xl font-semibold text-white/95">Découvrez & partagez</div>
        <div class="mt-3 text-white/60">Explorez, apprenez, ajoutez votre touche.</div>
      </div>
    </div>
  </section>

  <!-- WAITLIST -->
  <section id="waitlist" class="px-4 sm:px-6 py-10 pb-16">
    <div class="max-w-6xl mx-auto glass rounded-[32px] p-6 sm:p-10">
      <div class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-8">
        <div>
          <h2 class="text-2xl sm:text-3xl font-semibold text-white/95">Recevez une invitation</h2>
          <p class="mt-3 text-white/65 text-base sm:text-lg max-w-2xl">
            Laissez votre email : on vous envoie l’accès dès l’ouverture.
            <span class="text-white/85 font-semibold">Pas de spam.</span>
          </p>
        </div>
        <div class="glass-soft rounded-3xl px-4 py-3 text-sm text-white/70">
          iOS d’abord (bêta) • France d’abord • Extension ensuite
        </div>
      </div>

      <form id="waitlistForm" class="mt-8 grid sm:grid-cols-[1fr_auto] gap-3 items-start">
        <div>
          <label class="sr-only" for="email">Email</label>
          <input id="email" name="email" type="email" inputmode="email" autocomplete="email" required
                 placeholder="Votre email"
                 class="w-full px-5 py-4 rounded-3xl bg-white/5 text-white/90 placeholder:text-white/35 ring-1 ring-white/15 focus:outline-none focus:ring-2 focus:ring-white/25" />
          <div class="mt-3 flex items-start gap-2">
            <input id="privacy" type="checkbox" required class="mt-1 h-4 w-4 rounded border-white/30 bg-white/5" />
            <label for="privacy" class="text-sm text-white/60">
              J’accepte la <a class="underline hover:text-white/85" href="#privacyPolicy">politique de confidentialité</a>.
            </label>
          </div>
        </div>

        <button id="submitBtn" type="submit"
                class="px-7 py-4 rounded-3xl btn-primary text-base font-semibold transition disabled:opacity-60 disabled:cursor-not-allowed">
          Rejoindre la liste d’attente
        </button>
      </form>

      <div id="formMsg" class="mt-4 text-sm"></div>

      <div class="mt-8 hairline pt-8 grid sm:grid-cols-3 gap-3">
        <div class="glass-soft rounded-3xl p-5">
          <div class="text-sm font-semibold text-white/90">Promesse</div>
          <div class="mt-1 text-sm text-white/60">Un seul email : le lancement. Rien de plus.</div>
        </div>
        <div class="glass-soft rounded-3xl p-5">
          <div class="text-sm font-semibold text-white/90">Données</div>
          <div class="mt-1 text-sm text-white/60">Email uniquement, suppression sur demande.</div>
        </div>
        <div class="glass-soft rounded-3xl p-5">
          <div class="text-sm font-semibold text-white/90">But</div>
          <div class="mt-1 text-sm text-white/60">Redécouvrir la route — pas juste l’arrivée.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- PRIVACY POLICY -->
  <section id="privacyPolicy" class="px-4 sm:px-6 pb-16">
    <div class="max-w-6xl mx-auto glass-soft rounded-[32px] p-6 sm:p-10">
      <h3 class="text-white/90 font-semibold text-xl">Politique de confidentialité (résumé)</h3>
      <p class="mt-3 text-sm text-white/60">
        Nous collectons uniquement votre email pour vous envoyer une invitation et des informations liées au lancement.
        Vous pouvez demander la suppression de votre email à tout moment.
      </p>
      <p class="mt-3 text-sm text-white/45">
        (Remplacez ce texte par votre version officielle dès que possible.)
      </p>
    </div>
  </section>

  <!-- ========== SCRIPTS ========== -->

  <!-- Slider script -->
  <script>
    (function () {
      const screens = ["./screen1.png","./screen2.png","./screen3.png","./screen4.png","./screen5.png"];
      const captions = [
        "Votre itinéraire",
        "Votre détour en kilomètres",
        "Ce qui vaut l’arrêt",
        "Une fiche claire : infos, histoire, photos",
        "Contribuez : ajoutez, corrigez, partagez"
      ];

      const img = document.getElementById("appSlider");
      const fallback = document.getElementById("sliderFallback");
      const dots = Array.from(document.querySelectorAll(".dot"));
      const captionEl = document.getElementById("slideCaption");

      if (!img) return;

      let index = 0;
      const intervalMs = 2200;
      const fadeOutMs = 350;

      function setActiveDot(i) {
        dots.forEach((d, idx) => {
          d.classList.toggle("bg-white/85", idx === i);
          d.classList.toggle("bg-white/35", idx !== i);
        });
      }

      function setCaption(i) {
        if (!captionEl) return;
        captionEl.textContent = captions[i] || "Aperçu de l’application";
      }

      function canLoad(src) {
        return new Promise((resolve) => {
          const test = new Image();
          test.onload = () => resolve(true);
          test.onerror = () => resolve(false);
          test.src = src + (src.includes("?") ? "&" : "?") + "v=" + Date.now();
        });
      }

      async function findNextValid(startIdx) {
        for (let step = 0; step < screens.length; step++) {
          const i = (startIdx + step) % screens.length;
          if (await canLoad(screens[i])) return i;
        }
        return -1;
      }

      async function init() {
        const firstValid = await findNextValid(0);
        if (firstValid === -1) {
          img.classList.add("hidden");
          fallback.classList.remove("hidden");
          fallback.classList.add("flex");
          return;
        }
        index = firstValid;
        img.src = screens[index];
        setActiveDot(index);
        setCaption(index);
      }

      async function tick() {
        img.classList.add("opacity-0");
        setTimeout(async () => {
          const nextIdx = await findNextValid(index + 1);
          if (nextIdx === -1) return;
          index = nextIdx;
          img.src = screens[index];
          setActiveDot(index);
          setCaption(index);
          img.classList.remove("opacity-0");
        }, fadeOutMs);
      }

      init().then(() => setInterval(tick, intervalMs));
    })();
  </script>

  <!-- Firebase Firestore submit -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCWQJtzHMksDG5UgLVma8LnYiOxYYcv_AQ",
      authDomain: "guide-du-detour.firebaseapp.com",
      projectId: "guide-du-detour",
      storageBucket: "guide-du-detour.firebasestorage.app",
      messagingSenderId: "182479723840",
      appId: "1:182479723840:web:866963483cf1bca6f9aea5",
      measurementId: "G-17851JKM7F"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const form = document.getElementById("waitlistForm");
    const emailInput = document.getElementById("email");
    const privacy = document.getElementById("privacy");
    const msg = document.getElementById("formMsg");
    const btn = document.getElementById("submitBtn");

    function setMsg(text, type = "info") {
      msg.className = "mt-4 text-sm";
      if (type === "ok") msg.classList.add("text-emerald-300");
      if (type === "err") msg.classList.add("text-rose-300");
      if (type === "info") msg.classList.add("text-white/60");
      msg.textContent = text;
    }

    function isEmailValid(v) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(v).trim());
    }

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      setMsg("");

      const email = String(emailInput.value || "").trim();
      if (!isEmailValid(email)) {
        setMsg("Veuillez entrer un email valide.", "err");
        emailInput.focus();
        return;
      }
      if (!privacy.checked) {
        setMsg("Veuillez accepter la politique de confidentialité.", "err");
        privacy.focus();
        return;
      }

      btn.disabled = true;
      btn.textContent = "Envoi…";

      try {
        await addDoc(collection(db, "waitlist"), {
          email,
          source: "landing_page_french",
          createdAt: serverTimestamp(),
          userAgent: navigator.userAgent || null,
          language: navigator.language || null,
          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone || null
        });

        setMsg("Merci ! Vous êtes sur la liste. On vous contacte au lancement.", "ok");
        form.reset();
      } catch (err) {
        console.error(err);
        setMsg("Oups. Impossible d’envoyer pour le moment. Réessayez dans quelques minutes.", "err");
      } finally {
        btn.disabled = false;
        btn.textContent = "Rejoindre la liste d’attente";
      }
    });
  </script>

</body>
</html>
