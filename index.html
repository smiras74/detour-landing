<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guide du D√©tour | √áA VAUT LE D√âTOUR !</title>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à—Ä–∏—Ñ—Ç–∞ Inter */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            /* –¢—ë–º–Ω–æ-—Å–∏–Ω–∏–π —Ñ–æ–Ω */
            background-color: #0F172A; /* slate-900 */
            color: #E2E8F0; /* slate-200 */
            line-height: 1.6;
        }
        .text-accent {
            color: #38A169; /* –Ø—Ä–∫–∏–π –∑–µ–ª–µ–Ω—ã–π –∏–∑ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ */
        }
        .bg-accent {
            background-color: #38A169;
        }
        .bg-accent-dark {
            background-color: #2F855A;
        }
        .shadow-glow {
            box-shadow: 0 0 25px rgba(56, 161, 105, 0.5);
        }
        /* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –º–æ–∫–∞–ø–∞ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –∞–Ω–∏–º–∞—Ü–∏–∏/–∂–∏–≤–æ–≥–æ –≤–∏–¥–∞ */
        .app-mockup {
            border-radius: 3rem;
            border: 10px solid #1E293B;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5), 0 0 0 10px #0F172A;
        }

        /* --- –°–¢–ò–õ–¨ LIQUID GLASS (GLASSMORHISM) --- */
        .glass-effect {
            /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω (slate-800 —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é) */
            background-color: rgba(30, 41, 59, 0.75);
            /* –≠—Ñ—Ñ–µ–∫—Ç —Ä–∞–∑–º—ã—Ç–∏—è */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            /* –¢–æ–Ω–∫–∞—è –±–µ–ª–∞—è —Ä–∞–º–∫–∞ –¥–ª—è –≥–ª—É–±–∏–Ω—ã */
            border: 1px solid rgba(255, 255, 255, 0.1);
            /* –õ–µ–≥–∫–∞—è —Ç–µ–Ω—å */
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        /* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏–Ω–ø—É—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ glass-effect */
        .glass-effect input {
            background-color: rgba(15, 23, 42, 0.8) !important; /* –ë–æ–ª–µ–µ —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ */
        }
    </style>
</head>
<body class="antialiased">

    <!-- HERO SECTION (H√âROS) -->
    <header class="py-16 md:py-24 px-4 sm:px-6 lg:px-8 text-center min-h-screen flex items-center justify-center">
        <div class="max-w-4xl mx-auto">
            
            <!-- Logo et Ic√¥ne -->
            <div class="mb-8">
                <!-- –ò–º–∏—Ç–∞—Ü–∏—è –∏–∫–æ–Ω–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ç–µ–º–Ω—ã–π –∫–≤–∞–¥—Ä–∞—Ç, –∑–µ–ª–µ–Ω—ã–π –∞–∫—Ü–µ–Ω—Ç) -->
                <img src="https://placehold.co/64x64/0F172A/38A169?text=GDD" 
                     alt="Ic√¥ne de l'application Guide du D√©tour" 
                     class="w-16 h-16 inline-block mb-4 p-1 bg-slate-800 rounded-2xl shadow-lg shadow-black/50 ring-2 ring-accent/50"
                     onerror="this.onerror=null; this.src='https://placehold.co/64x64/0F172A/38A169?text=Logo';"
                >
                <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight text-white">
                    Guide du <span class="text-accent">D√©tour</span>
                </h1>
            </div>

            <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight text-slate-100 mb-10">
                <span class="text-accent">√áA VAUT LE D√âTOUR !</span>
            </h2>
            
            <p class="max-w-3xl mx-auto text-lg text-slate-400 mb-12">
                Le guide qui ne cherche pas le chemin le plus rapide, mais <span class="text-accent font-semibold">le plus riche en d√©couvertes</span>.
            </p>

            <!-- Formulaire de collecte d'email (–° —ç—Ñ—Ñ–µ–∫—Ç–æ–º Glassmorphism) -->
            <form id="email-form" class="max-w-lg mx-auto p-4 rounded-xl shadow-2xl glass-effect">
                <p class="text-slate-300 mb-4 font-semibold">Rejoignez le Club des √âclaireurs et soyez les premiers inform√©s !</p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="email" id="email-input" placeholder="Votre Email" required 
                           class="flex-grow p-4 rounded-lg border border-slate-700 text-white focus:ring-accent focus:border-accent transition duration-300 outline-none">
                    <button type="submit" 
                            class="bg-accent hover:bg-accent-dark text-white font-bold py-4 px-8 rounded-lg transition duration-300 shadow-glow hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-accent/50 sm:w-auto w-full">
                        D√©couvrir le lancement
                    </button>
                </div>
                <div id="message-container" class="mt-4 text-sm font-medium h-6"></div>
            </form>
        </div>
    </header>

    <!-- SECTION: PROBL√àME ET SOLUTION (–° —ç—Ñ—Ñ–µ–∫—Ç–æ–º Glassmorphism) -->
    <section class="py-16 px-4 sm:px-6 lg:px-8 bg-slate-800/50">
        <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-12 items-start">
            
            <!-- –ë–ª–æ–∫ –ü—Ä–æ–±–ª–µ–º–∞ -->
            <div class="p-6 rounded-xl shadow-xl glass-effect">
                <h3 class="text-3xl font-bold text-red-400 mb-4">‚ùå Le Probl√®me : L'optimisation tue l'aventure</h3>
                <p class="text-slate-300 mb-4">
                    Les GPS classiques sont des robots. Leur seul but est de vous faire gagner 4 minutes, m√™me si cela implique de traverser une zone industrielle ennuyeuse.
                </p>
                <p class="text-slate-400">
                    Ils ont transform√© le voyage en une simple t√¢che "Aller de A √† B", o√π le d√©tour est consid√©r√© comme une perte de temps, et non comme une opportunit√©.
                </p>
            </div>

            <!-- –ë–ª–æ–∫ –†–µ—à–µ–Ω–∏–µ -->
            <div class="p-6 rounded-xl shadow-xl glass-effect">
                <h3 class="text-3xl font-bold text-accent mb-4">‚úÖ La Solution : Votre D√©tour</h3>
                <p class="text-slate-300 mb-4">
                    Nous pensons que la route n'est pas qu'une simple voie. C'est une partie de la vie. Guide du D√©tour change les algorithmes pour enrichir votre trajet, pas seulement pour gagner des secondes.
                </p>
                <p class="text-slate-400">
                    <span class="text-accent font-semibold">Votre voyage devient une histoire</span>.
                </p>
            </div>

        </div>
    </section>
    
    <!-- SECTION: FONCTIONNALIT√âS CL√âS (–° —ç—Ñ—Ñ–µ–∫—Ç–æ–º Glassmorphism) -->
    <section class="py-20 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-extrabold text-center mb-16 text-white">
                Huit raisons de <span class="text-accent">tomber amoureux</span> de la route
            </h2>

            <div class="grid md:grid-cols-3 gap-8">
                
                <!-- Feature 1: Rayon de libert√© -->
                <div class="p-6 rounded-2xl shadow-2xl glass-effect">
                    <div class="text-accent text-5xl mb-4">üß≠</div>
                    <h3 class="text-2xl font-bold text-white mb-3">Rayon de libert√©</h3>
                    <p class="text-slate-400">
                        Vous choisissez vous-m√™me dans quelle mesure vous √™tes pr√™t √† vous √©carter du chemin. L'application trouve des tr√©sors (histoire, nature, gastronomie) en fonction de vos centres d'int√©r√™t.
                    </p>
                </div>

                <!-- Feature 2: Le Point Myst√®re -->
                <div class="p-6 rounded-2xl shadow-2xl glass-effect">
                    <div class="text-accent text-5xl mb-4">‚ùì</div>
                    <h3 class="text-2xl font-bold text-white mb-3">Le Point Myst√®re</h3>
                    <p class="text-slate-400">
                        Un rendez-vous √† l'aveugle avec un lieu. Un '?' appara√Æt sur la carte. Pas de photos, pas de spoilers. Seulement une description intrigante. Vous ne saurez ce que c'est qu'une fois arriv√©.
                    </p>
                </div>

                <!-- Feature 3: L'Escale Parfaite -->
                <div class="p-6 rounded-2xl shadow-2xl glass-effect">
                    <div class="text-accent text-5xl mb-4">üåÖ</div>
                    <h3 class="text-2xl font-bold text-white mb-3">L'Escale Parfaite</h3>
                    <p class="text-slate-400">
                        Le repos comme un art. Nous planifions les arr√™ts non pas en fonction de la jauge d'essence, mais de vos biorythmes. Un coucher de soleil approche ? Nous vous emmenons √† un point de vue panoramique.
                    </p>
                </div>

            </div>
        </div>
    </section>

    <!-- SECTION: VISUALISATION (MOCKUP) -->
    <section class="py-20 px-4 sm:px-6 lg:px-8 overflow-hidden">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="text-4xl font-bold text-white mb-8">
                L'itin√©raire qui <span class="text-accent">s'adapte</span> √† vous
            </h2>
            <p class="text-slate-400 max-w-2xl mx-auto mb-10">
                Vous voyagez avec des enfants ? Nous trouverons des fermes et des parcs. En couple ? Des vignobles et des panoramas. L'application s'ajuste √† votre profil et √† vos centres d'int√©r√™t.
            </p>
            
            <!-- –ú–æ–∫–∞–ø —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–∑–∞–º–µ–Ω–µ–Ω –Ω–∞ image placeholder, –∏–º–∏—Ç–∏—Ä—É—é—â–∏–π —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–∑ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏) -->
            <div class="relative inline-block mt-8">
                <img src="https://placehold.co/300x600/1E293B/38A169?text=Guide+du+D√©tour%0AApp+Mockup" 
                     alt="Maquette de t√©l√©phone avec l'application Guide du D√©tour" 
                     class="w-64 h-96 sm:w-80 sm:h-[40rem] app-mockup transition duration-500 hover:scale-[1.01] transform"
                     onerror="this.onerror=null; this.src='https://placehold.co/300x600/1E293B/38A169?text=App+Screenshot';"
                >
                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç -->
                <div class="absolute top-10 -right-20 transform rotate-6 bg-yellow-400 p-3 rounded-xl shadow-xl font-bold text-slate-900 text-lg">
                    Slow Travel!
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION: CTA FINAL (–° —ç—Ñ—Ñ–µ–∫—Ç–æ–º Glassmorphism) -->
    <section class="py-20 px-4 sm:px-6 lg:px-8 bg-slate-800/50">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="text-4xl font-extrabold text-white mb-6">
                Nous sommes fatigu√©s de la course. <span class="text-accent">Soutenez Guide du D√©tour.</span>
            </h2>
            <p class="text-xl text-slate-400 mb-10">
                Aidez-nous √† cr√©er l'outil qui fera revivre la culture du <span class="font-semibold text-white">Slow Travel</span> et r√©v√®lera la v√©ritable √¢me de la France.
            </p>

            <!-- Formulaire de collecte d'email (r√©p√©tition, —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º Glassmorphism) -->
            <form id="email-form-bottom" class="max-w-xl mx-auto p-6 rounded-xl shadow-2xl glass-effect">
                <p class="text-slate-300 mb-4 font-semibold text-lg">Soyez parmi les premiers √† tester l'application !</p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="email" id="email-input-bottom" placeholder="Votre Email" required 
                           class="flex-grow p-4 rounded-lg border border-slate-700 text-white focus:ring-accent focus:border-accent transition duration-300 outline-none">
                    <button type="submit" 
                            class="bg-accent hover:bg-accent-dark text-white font-bold py-4 px-8 rounded-lg transition duration-300 shadow-glow hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-accent/50 sm:w-auto w-full">
                        S'inscrire √† la newsletter
                    </button>
                </div>
                <div id="message-container-bottom" class="mt-4 text-sm font-medium h-6"></div>
            </form>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="py-8 px-4 sm:px-6 lg:px-8 text-center border-t border-slate-700">
        <p class="text-slate-500 text-sm">&copy; 2025 Guide du D√©tour. <span class="font-bold text-accent">√áA VAUT LE D√âTOUR !</span></p>
        <p class="text-xs text-slate-600 mt-2">Con√ßu pour la communaut√© des √âclaireurs.</p>
    </footer>

    <script type="module">
        // Firebase imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, setPersistence, browserSessionPersistence } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, addDoc, collection, serverTimestamp, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global Firebase and App Configuration
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db;
        let auth;
        let isAuthReady = false;

        // Initialize Firebase and authenticate
        try {
            if (Object.keys(firebaseConfig).length > 0) {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                setLogLevel('error'); // Reduced logging for production environment

                await setPersistence(auth, browserSessionPersistence);

                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }
            } else {
                console.error("Firebase configuration is missing.");
            }
        } catch (error) {
            console.error("Firebase initialization or sign-in failed:", error);
        }

        // Wait for auth state to be confirmed
        onAuthStateChanged(auth, (user) => {
            if (user) {
                console.log("User signed in with UID:", user.uid);
            } else {
                console.log("User signed out or anonymous.");
            }
            isAuthReady = true;
        });

        const forms = [
            { form: document.getElementById('email-form'), input: document.getElementById('email-input'), message: document.getElementById('message-container') },
            { form: document.getElementById('email-form-bottom'), input: document.getElementById('email-input-bottom'), message: document.getElementById('message-container-bottom') }
        ];

        /**
         * Saves the email to Firebase Firestore.
         * @param {string} email 
         * @returns {Promise<boolean>} Success status
         */
        const saveEmailToFirestore = async (email) => {
            if (!isAuthReady || !db) {
                console.error("Firestore not ready or database object missing.");
                return false;
            }

            try {
                // Public collection path, updated to use 'waitlist' as requested
                const collectionPath = `artifacts/${appId}/public/data/waitlist`;
                const emailData = {
                    email: email,
                    timestamp: serverTimestamp(),
                    source: 'landing_page_newsletter'
                };

                await addDoc(collection(db, collectionPath), emailData);
                return true;
            } catch (error) {
                console.error("Error writing document to Firestore:", error);
                return false;
            }
        };

        /**
         * Handles form submission: validates email, saves to Firestore, and updates UI.
         * @param {string} email 
         * @param {HTMLElement} messageElement 
         */
        const submitEmail = async (email, messageElement) => {
            if (!email || !email.includes('@') || !email.includes('.')) {
                messageElement.classList.add('text-red-400');
                messageElement.textContent = '‚ùå Veuillez entrer une adresse e-mail valide.';
                return;
            }

            messageElement.textContent = 'Envoi en cours...';
            messageElement.classList.remove('text-red-400', 'text-accent');
            messageElement.classList.add('text-yellow-400');

            const success = await saveEmailToFirestore(email);

            if (success) {
                messageElement.classList.remove('text-yellow-400');
                messageElement.classList.add('text-accent');
                messageElement.textContent = '‚úÖ Merci ! Vous √™tes abonn√©(e) et serez le premier inform√© du lancement !';
                // Effacer le champ de saisie
                forms.forEach(f => {
                    if (f.input.value === email) {
                        f.input.value = '';
                    }
                });
            } else {
                messageElement.classList.remove('text-yellow-400');
                messageElement.classList.add('text-red-400');
                messageElement.textContent = "‚ùå Une erreur est survenue lors de l'enregistrement. Veuillez r√©essayer.";
            }
        };

        // Ajout des √©couteurs d'√©v√©nements aux deux formulaires
        forms.forEach(({ form, input, message }) => {
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const email = input.value.trim();
                submitEmail(email, message);
            });
        });
    </script>
</body>
</html>
